{
  "version": 3,
  "sources": ["../../phaser3-rex-plugins/plugins/storage/localstorage/utils/StorageMethods.js", "../../phaser3-rex-plugins/plugins/storage/localstorage/data/StorageMethods.js", "../../phaser3-rex-plugins/plugins/storage/localstorage/data/Load.js", "../../phaser3-rex-plugins/plugins/storage/localstorage/data/GetDefaultValue.js", "../../phaser3-rex-plugins/plugins/storage/localstorage/data/AddCallbacks.js", "../../phaser3-rex-plugins/plugins/storage/localstorage/data/Extend.js", "../../phaser3-rex-plugins/plugins/storage/localstorage/data/DataManager.js", "../../phaser3-rex-plugins/plugins/localstorage-data.js", "../../phaser3-rex-plugins/plugins/localstorage-data-plugin.js"],
  "sourcesContent": ["var GetStoreKey = function (key, prefix) {\r\n    if (prefix && prefix !== '') {\r\n        return `${prefix}.${key}`;\r\n    } else {\r\n        return key;\r\n    }\r\n};\r\n\r\nvar GetDataKey = function (key, prefix) {\r\n    if (prefix && prefix !== '') {\r\n        return key.substring(prefix.length + 1)\r\n    } else {\r\n        return key;\r\n    }\r\n}\r\n\r\nvar SetItem = function (dataKey, prefix, value) {\r\n    // Ref : https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API#basic_concepts\r\n    // **The keys and the values are always strings**\r\n    value = JSON.stringify([value]);\r\n    localStorage.setItem(GetStoreKey(dataKey, prefix), value);\r\n}\r\n\r\nvar GetItem = function (dataKey, prefix) {\r\n    var value = localStorage.getItem(GetStoreKey(dataKey, prefix));\r\n\r\n    if (value == null) {\r\n        return undefined;\r\n    } else {\r\n        value = JSON.parse(value)[0];\r\n        return value\r\n    }\r\n}\r\n\r\nvar RemoveItem = function (dataKey, prefix) {\r\n    localStorage.removeItem(GetStoreKey(dataKey, prefix));\r\n    return this;\r\n}\r\n\r\nexport {\r\n    GetStoreKey, GetDataKey,\r\n    SetItem, GetItem, RemoveItem\r\n}", "import {\r\n    GetStoreKey, GetDataKey,\r\n    SetItem, GetItem, RemoveItem\r\n} from '../utils/StorageMethods.js';\r\n\r\nexport default {\r\n    getStoreKey(dataKey) {\r\n        return GetStoreKey(dataKey, this.name);\r\n    },\r\n\r\n    getDataKey(storeKey) {\r\n        return GetDataKey(storeKey, this.name);\r\n    },\r\n\r\n    setItem(dataKey, value) {\r\n        SetItem(dataKey, this.name, value);\r\n        return this;\r\n    },\r\n\r\n    getItem(dataKey) {\r\n        return GetItem(dataKey, this.name);\r\n    },\r\n\r\n    removeItem(dataKey) {\r\n        RemoveItem(dataKey, this.name);\r\n        return this;\r\n    }\r\n}", "var LoadDataKeys = function () {\r\n    this.dataKeys.clear();\r\n    var keys = this.getItem('__keys__');\r\n    if (keys) {\r\n        for (var i = 0, cnt = keys.length; i < cnt; i++) {\r\n            this.dataKeys.set(keys[i]);\r\n        }\r\n    }\r\n    return this;\r\n}\r\n\r\nvar Load = function (defaultData, reset) {\r\n    if (defaultData === undefined) {\r\n        reset = false;\r\n    }\r\n\r\n    LoadDataKeys.call(this);\r\n    this.defaultData = defaultData;\r\n\r\n    this._syncEnable = false;\r\n    this.reset();\r\n    if (!reset) {\r\n        // Load data from localstorage according to dataKeys\r\n        this.dataKeys.iterate(function (dataKey, index) {\r\n            this.set(dataKey, this.getItem(dataKey));\r\n        }, this);\r\n    }\r\n    this._syncEnable = true;\r\n\r\n    if (defaultData) {  // Load data according to defaultData        \r\n        var value, prevValue;\r\n        for (var dataKey in defaultData) {\r\n            prevValue = (reset) ? undefined : this.getItem(dataKey);\r\n            value = (prevValue === undefined) ? defaultData[dataKey] : prevValue;\r\n            this.set(dataKey, value);\r\n        }\r\n\r\n        this.setItem('__keys__', this.dataKeys.entries);\r\n    }\r\n\r\n    return this;\r\n}\r\n\r\nexport default Load;", "var GetDefaultValue = function (key) {\r\n    return (this.defaultData) ? this.defaultData[key] : undefined;\r\n}\r\nexport default GetDefaultValue;", "var AddCallbacks = function (dataManager) {\r\n    dataManager.events\r\n\r\n        // Change value\r\n        .on('changedata', function (parent, key, value, previousValue) {\r\n            if (!this._syncEnable) {\r\n                return;\r\n            }\r\n            if ((typeof (value) !== 'object') && (value === previousValue)) {\r\n                return;\r\n            }\r\n            this.setItem(key, value);\r\n            if (!this.dataKeys.contains(key)) {\r\n                this.dataKeys.set(key);\r\n                this.setItem('__keys__', this.dataKeys.entries);\r\n            }\r\n        }, dataManager)\r\n\r\n        // Add key\r\n        .on('setdata', function (parent, key, value) {\r\n            if (!this._syncEnable) {\r\n                return;\r\n            }\r\n            this.setItem(key, value);\r\n            this.dataKeys.set(key);\r\n            this.setItem('__keys__', this.dataKeys.entries);\r\n        }, dataManager)\r\n\r\n        // Remove key\r\n        .on('removedata', function (parent, key, value) {\r\n            if (!this._syncEnable) {\r\n                return;\r\n            }\r\n            this.removeItem(key);\r\n            this.dataKeys.delete(key);\r\n            this.setItem('__keys__', this.dataKeys.entries);\r\n        }, dataManager);\r\n\r\n}\r\n\r\nexport default AddCallbacks;", "import StorageMethods from './StorageMethods.js';\r\nimport Load from './Load.js';\r\nimport GetDefaultValue from './GetDefaultValue.js';\r\nimport AddCallbacks from './AddCallbacks.js';\r\n\r\nconst GetValue = Phaser.Utils.Objects.GetValue;\r\nconst SetStruct = Phaser.Structs.Set;\r\n\r\n\r\nvar methods = {\r\n    load: Load,\r\n    getDefaultValue: GetDefaultValue,\r\n}\r\n\r\nvar Extend = function (dataManager, config) {\r\n    if (dataManager.hasOwnProperty('_syncEnable')) {\r\n        // Already extended\r\n        return dataManager;\r\n    }\r\n\r\n    dataManager._syncEnable = true;\r\n    dataManager.dataKeys = new SetStruct();\r\n    dataManager.defaultData = undefined;\r\n\r\n    Object.assign(\r\n        dataManager,\r\n        StorageMethods,\r\n        methods\r\n    );\r\n\r\n    AddCallbacks(dataManager);\r\n\r\n    dataManager.name = GetValue(config, 'name', '');\r\n\r\n    var load = GetValue(config, 'load', true);\r\n    if (load) {\r\n        var defaultData = GetValue(config, 'default', undefined);\r\n        var resetFlag = GetValue(config, 'reset', false);\r\n        dataManager.load(defaultData, resetFlag);\r\n    }\r\n\r\n    return dataManager;\r\n}\r\n\r\nexport default Extend", "import Extend from './Extend.js';\r\n\r\nconst Base = Phaser.Data.DataManager;\r\nconst EventEmitterClass = Phaser.Events.EventEmitter;\r\nconst IsPlainObject = Phaser.Utils.Objects.IsPlainObject;\r\n\r\nclass DataManager extends Base {\r\n    constructor(parent, eventEmitter, config) {\r\n        if (IsPlainObject(parent)) {\r\n            config = parent;\r\n            parent = undefined;\r\n            eventEmitter = undefined;\r\n        } else if (IsPlainObject(eventEmitter)) {\r\n            config = eventEmitter;\r\n            eventEmitter = undefined;\r\n        }\r\n\r\n        var useDefaultEventEmitter = (eventEmitter === undefined);\r\n        if (useDefaultEventEmitter) {\r\n            eventEmitter = new EventEmitterClass();\r\n        }\r\n        if (parent === undefined) {\r\n            parent = eventEmitter;\r\n        }\r\n\r\n        super(parent, eventEmitter);\r\n\r\n        if (useDefaultEventEmitter) {\r\n            var parentEventEmitter = (parent.events) ? parent.events : parent;\r\n            if (parentEventEmitter) {\r\n                parentEventEmitter.once('destroy', this.destroy, this);\r\n            }\r\n        }\r\n\r\n        Extend(this, config);\r\n    }\r\n}\r\n\r\nexport default DataManager;", "import DataManager from './storage/localstorage/data/DataManager.js';\r\nexport default DataManager;", "import DataManager from './localstorage-data.js';\r\nimport Extend from './storage/localstorage/data/Extend.js';\r\nimport { SetItem, GetItem, RemoveItem } from './storage/localstorage/utils/StorageMethods.js';\r\n\r\n\r\nclass DataManagerPlugin extends Phaser.Plugins.BasePlugin {\r\n\r\n    constructor(pluginManager) {\r\n        super(pluginManager);\r\n    }\r\n\r\n    start() {\r\n        var eventEmitter = this.game.events;\r\n        eventEmitter.on('destroy', this.destroy, this);\r\n    }\r\n\r\n    add(parent, eventEmitter, config) {\r\n        return new DataManager(parent, eventEmitter, config);\r\n    }\r\n\r\n    extend(dataManager, config) {\r\n        return Extend(dataManager, config);\r\n    }\r\n\r\n    setItem(dataKey, name, value) {\r\n        SetItem(dataKey, name, value);\r\n        return this;\r\n    }\r\n\r\n    getItem(dataKey, name) {\r\n        return GetItem(dataKey, name);\r\n    }\r\n\r\n    removeItem(dataKey, name) {\r\n        RemoveItem(dataKey, name);\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default DataManagerPlugin;"],
  "mappings": "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",
  "names": ["dataKey"]
}
